类加载运行全过程  
当我们用java命令运行某个类的main函数启动程序时，首先需要通过类加载器把主类加载到JVM。

[[Notes/a-Java知识系统构建/12-JVM内存模型/attachments/223a5bb1e16f264da2e843312ef98196_MD5.jpeg|Open: Pasted image 20240824153616.png]]  
![[Notes/a-Java知识系统构建/12-JVM内存模型/attachments/223a5bb1e16f264da2e843312ef98196_MD5.jpeg]]  
其中loadClass的类加载过程有如下几步：

加载 >> 验证 >> 准备 >> 解析 >> 初始化 >> 使用 >> 卸载

- 加载：在硬盘上查找并通过IO读入字节码文件，使用到类时才会加载，例如调用类的

main()方法，new对象等等，在加载阶段会在内存中生成一个代表这个类的

java.lang.Class对象，作为方法区这个类的各种数据的访问入口

- 验证：校验字节码文件的正确性
- 准备：给类的静态变量分配内存，并赋予默认值
- 解析：将符号引用替换为直接引用，该阶段会把一些静态方法(符号引用，比如

main()方法)替换为指向数据所存内存的指针或句柄等(直接引用)，这是所谓的静态链接过

程(类加载期间完成)，动态链接是在程序运行期间完成的将符号引用替换为直接引用，下

节课会讲到动态链接

- 初始化：对类的静态变量初始化为指定的值，执行静态代码块
